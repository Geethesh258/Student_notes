<!DOCTYPE html>
<html>
<head>
    <title>View Assignment</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}" />
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet" />

    <style>
        body {
            font-family: 'Poppins', sans-serif;
            background-color: #f5f6fa;
            color: #333;
            margin: 0;
            padding: 0;
        }
        .assignment-info {
            background: white;
            padding: 25px;
            border-radius: 10px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.08);
            margin-top: 20px;
        }
        .assignment-info p {
            margin: 8px 0;
            font-size: 16px;
        }
        .file-preview {
            margin-top: 25px;
            text-align: center;
        }
        .file-preview img,
        .file-preview embed {
            max-width: 100%;
            border-radius: 10px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }
        .top-actions {
            display: flex;
            justify-content: flex-end;
            gap: 10px;
            margin: 15px 0;
        }
        .btn {
            background-color: #6c63ff;
            color: white;
            padding: 8px 16px;
            border-radius: 6px;
            text-decoration: none;
            font-weight: 500;
            font-size: 14px;
        }
        .btn:hover {
            background-color: #5a54d1;
        }
        .btn-danger {
            background-color: #e74c3c;
        }
        .btn-danger:hover {
            background-color: #c0392b;
        }
        .page-title {
            text-align: center;
            margin-top: 10px;
            font-weight: 600;
            color: #2c3e50;
        }
        .top-actions .btn:hover {
        background-color: #357abd;
        box-shadow: 0 6px 18px rgba(53, 122, 189, 0.6);
        transform: scale(1.1);
      }
      /* Delete button */
      .top-actions .Delete {
        background-color: #e74c3c;
        box-shadow: 0 4px 12px rgba(231, 76, 60, 0.4);
      }

      .top-actions .Delete:hover {
        background-color: #c0392b;
        box-shadow: 0 6px 18px rgba(192, 57, 43, 0.6);
        transform: scale(1.1);
      }
    </style>
</head>
<body>

<header class="cover">
    <div class="container">
        <h1>View Assignment Portal</h1>
        <p>Your one-stop platform for uploading, searching, and managing assignments effortlessly.</p>
    </div>
</header>

<nav>
    <ul class="navbar">
        <li><a href="/profile">üë§</a></li>
        <li><a href="{{ url_for('home') }}">üè†</a></li>
        <li><a href="/upload_notes">Upload Notes</a></li>
        <li><a href="/search_notes">Search Notes</a></li>
        <li><a href="{{ url_for('upload_assignment') }}">Upload Assignment</a></li>
        <li><a href="{{ url_for('search_assignment') }}">Search Assignment</a></li>
        <li><a href="/attendance">Attendance</a></li>
        <li><a href="/logout">üö™</a></li>
    </ul>
</nav>

<div class="container">

    <!-- Back & Delete Buttons at Top Right -->
    <div class="top-actions">
        <a href="javascript:history.back()" class="btn">‚Üê Back</a>
        <a href="{{ url_for('delete_assignment', assignment_id=assignment._id) }}" class="btn btn-danger" onclick="return confirm('Are you sure you want to delete this assignment?')">Delete</a>
    </div>

    <!-- Centered Heading -->
    <h1 class="page-title">View Assignment</h1>

    <div class="assignment-info">
        <p><strong>Subject:</strong> {{ assignment.subject }}</p>
        <p><strong>Title:</strong> {{ assignment.title }}</p>
        <p><strong>Due Date:</strong> {{ assignment.due_date or 'N/A' }}</p>
        <p><strong>Uploaded On:</strong> {{ assignment.upload_date.strftime('%Y-%m-%d') if assignment.upload_date else '' }}</p>

        <div class="file-preview">
            {% if assignment.file_data %}
                {% if assignment.file_mime.startswith("image") %}
                    <img src="data:{{ assignment.file_mime }};base64,{{ assignment.file_data }}" alt="File Preview">
                {% elif assignment.file_mime == "application/pdf" %}
                    <embed src="data:application/pdf;base64,{{ assignment.file_data }}" type="application/pdf" width="100%" height="500px" />
                {% else %}
                    <p>File cannot be previewed. <a href="{{ url_for('download_assignment', assignment_id=assignment._id) }}">Download</a></p>
                {% endif %}
            {% elif assignment.file_url %}
                {% if assignment.file.endswith(".pdf") %}
                    <embed src="{{ assignment.file_url }}" type="application/pdf" width="100%" height="500px" />
                {% elif assignment.file.lower().endswith((".jpg", ".jpeg", ".png", ".gif")) %}
                    <img src="{{ assignment.file_url }}" alt="Image Preview">
                {% else %}
                    <p>File cannot be previewed. <a href="{{ assignment.file_url }}">Download</a></p>
                {% endif %}
            {% elif assignment.captured_image %}
                <img src="data:image/jpeg;base64,{{ assignment.captured_image }}" alt="Captured Image">
            {% else %}
                <p>No file available.</p>
            {% endif %}
        </div>
    </div>
</div>

</body>
</html>
